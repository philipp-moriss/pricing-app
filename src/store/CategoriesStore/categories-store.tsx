import { action, makeObservable, observable } from 'mobx';import { CategoryType, SpendingModel } from 'store/Type/models';import { v1 } from 'uuid';import { WalletStore } from '../WalletStore';export class CategoriesStore extends WalletStore {	categories: CategoryType[] = [		{ _id: v1(), value: 'Food Store' },		{ _id: v1(), value: 'Clothing Shop' },		{ _id: v1(), value: 'Communal services' },		{ _id: v1(), value: 'Entertainment' },		{ _id: v1(), value: 'Auto services' },		{ _id: v1(), value: 'Gifts' },		{ _id: v1(), value: 'Cigarettes and alcohol' },		{ _id: v1(), value: 'Other' },	];	selectedСategories: string[] = [];	walletChartId: string | undefined = '';	chartData = {		labels: [			'Auto services',			'Cigarettes and alcohol',			'Clothing Shop',			'Communal services',			'Entertainment',			'Food Store',			'Gifts',			'Other',		],		datasets: [			{				label: 'Graphic',				data: [10, 10, 10],				backgroundColor: [					'rgba(255, 99, 132, 0.2)',					'rgba(54, 162, 235, 0.2)',					'rgba(255, 206, 86, 0.2)',					'rgba(75, 192, 192, 0.2)',					'rgba(153, 102, 255, 0.2)',					'rgba(255, 159, 64, 0.2)',				],				borderWidth: 1,			},		],	};	constructor() {		super();		makeObservable(this, {			selectedСategories: observable,			chartData: observable,			walletChartId: observable,			setWalletChartId: action,			setSelectedСategories: action,			transformationDataToChart: action,		});		this.setSelectedСategories = this.setSelectedСategories.bind(this);		this.setWalletChartId = this.setWalletChartId.bind(this);	}	setSelectedСategories(newCategory: string): void {		const checkRepeatSelectedCategories = this.selectedСategories.find(			(category) => category === newCategory,		);		if (checkRepeatSelectedCategories) {			this.selectedСategories = this.selectedСategories.filter(				(category) => category !== checkRepeatSelectedCategories,			);		} else {			this.selectedСategories = [...this.selectedСategories, newCategory];		}	}	transformationDataToChart(data: SpendingModel[]): void {		const sortList = data.sort((a, b) => (b.title > a.title ? -1 : 1));		const holder: { [key: string]: number } = {};		sortList.forEach((spend) => {			// eslint-disable-next-line no-prototype-builtins			if (holder.hasOwnProperty(spend.title)) {				holder[spend.title] = +holder[spend.title] + +spend.amount;			} else {				holder[spend.title] = +spend.amount;			}		});		const totalAmountCategories = [];		console.log(sortList);		for (const prop in holder) {			totalAmountCategories.push(holder[prop]);		}		console.log(totalAmountCategories);		this.chartData = {			labels: [				'Auto services',				'Cigarettes and alcohol',				'Clothing Shop',				'Communal services',				'Entertainment',				'Food Store',				'Gifts',				'Other',			],			datasets: [				{					label: 'Graphic',					data: totalAmountCategories,					backgroundColor: [						'rgba(255, 99, 132, 0.2)',						'rgba(54, 162, 235, 0.2)',						'rgba(255, 206, 86, 0.2)',						'rgba(75, 192, 192, 0.2)',						'rgba(153, 102, 255, 0.2)',						'rgba(255, 159, 64, 0.2)',					],					borderWidth: 1,				},			],		};	}	async setWalletChartId(idWallet: string): Promise<void> {		this.walletChartId = idWallet;		try {			const allSpendCurrentWallet = await this.getCurrentHistory(idWallet);			this.transformationDataToChart(allSpendCurrentWallet);		} catch (e) {			console.log(e);		}		return;	}	addСategory(category: CategoryType): void {		this.categories.push(category);		return;	}	removeСategory(idCategory: string): void {		const currentCategory = this.categories.findIndex((category) => category._id === idCategory);		this.categories.splice(currentCategory, 1);		return;	}	changeСategory(currentCategory: CategoryType): void {		this.categories.find((category) => {			if (category._id === currentCategory._id) {				category.value = currentCategory.value;			}		});		return;	}	setСategory(categories: CategoryType[]): void {		this.categories = categories;		return;	}}export default new CategoriesStore();